<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAYORA | ניהול הפקה</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
            background-color: #0a0a0a;
            color: #E0E0E0;
        }
        .bg-black-gradient {
            background: linear-gradient(180deg, #1a1a1a 0%, #000000 100%);
        }
        .text-gold {
            color: #FFD700;
        }
        .border-gold {
            border-color: #FFD700;
        }
        .btn-gold {
            background-color: #FFD700;
            color: #111111;
            transition: all 0.3s ease;
        }
        .btn-gold:hover {
            background-color: #e6c200;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        .input-field {
            background-color: #2a2a2a;
            border: 1px solid #444;
            color: #E0E0E0;
        }
        .input-field:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        #sidebar {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        #sidebar.open {
            transform: translateX(0);
        }
        .content-card {
            background-color: rgba(26, 26, 26, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
    </style>
</head>
<body class="bg-black">

    <!-- Login View -->
    <div id="login-view" class="flex flex-col items-center justify-center min-h-screen p-4 bg-black-gradient">
        <div class="w-full max-w-sm text-center">
            <img src="https://i.imgur.com/L1bxSUe.jpeg" alt="SAYORA Logo" class="w-40 h-40 object-cover rounded-full mx-auto mb-6 border-2 border-gold shadow-lg shadow-gold/20">
            <h1 class="text-4xl font-bold text-gold mb-2" style="letter-spacing: 2px;">SAYORA</h1>
            <p class="text-lg text-gray-300 mb-8">פורטל ניהול והפקה</p>
            
            <form id="login-form" class="space-y-4">
                <input type="email" id="email" placeholder="אימייל" class="w-full p-3 rounded-lg input-field text-right" required>
                <input type="password" id="password" placeholder="סיסמה" class="w-full p-3 rounded-lg input-field text-right" required>
                <button type="submit" class="w-full font-bold py-3 px-4 rounded-lg btn-gold">התחברות</button>
            </form>
            <p id="login-error" class="text-red-400 mt-4 h-5"></p>
        </div>
    </div>

    <!-- Main App View -->
    <div id="main-view" class="hidden bg-black-gradient">
        <!-- Header -->
        <header class="bg-black/80 backdrop-blur-sm sticky top-0 z-40 shadow-lg shadow-gold/10">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <button id="hamburger-btn" class="text-gold text-3xl p-2 lg:hidden">
                    &#9776;
                </button>
                <div class="flex items-center gap-3">
                    <img src="https://i.imgur.com/L1bxSUe.jpeg" alt="SAYORA Logo" class="w-10 h-10 rounded-full border border-gold">
                    <span class="text-2xl font-bold text-gold">SAYORA</span>
                </div>
                <div id="user-info" class="flex items-center gap-3">
                    <span id="welcome-msg" class="text-sm text-gray-300 hidden md:block"></span>
                    <button id="logout-btn" class="bg-transparent border border-gold text-gold py-1 px-3 rounded-md text-sm hover:bg-gold hover:text-black transition-colors">
                        התנתקות
                    </button>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/60 z-40 hidden lg:hidden"></div>
        <nav id="sidebar" class="fixed top-0 right-0 h-full w-64 bg-black-gradient shadow-2xl z-50 p-6 lg:hidden">
            <button id="close-sidebar-btn" class="absolute top-4 left-4 text-gray-400 text-2xl">&times;</button>
            <div class="mt-12 space-y-4 text-center">
                <a href="festival-info.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">הסבר על הפסטיבל</a>
                <a href="costs.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">עלויות</a>
                <a href="suppliers.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">ספקים</a>
                <a href="map.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">מפת הפסטיבל</a>
                <a href="tickets.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">כרטיסים</a>
                <a href="summaries.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">סיכומים</a>
                <a href="user-management.html" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg">ניהול משתמשים</a>
            </div>
        </nav>
        
        <!-- Main Content -->
        <div class="flex">
            <!-- Desktop Sidebar -->
            <aside class="w-64 bg-black p-6 hidden lg:block h-screen sticky top-0 shadow-lg shadow-black/50 border-l border-gray-800">
                <h2 class="text-xl font-semibold text-gold mb-6 border-b border-gold/20 pb-2">תפריט ניווט</h2>
                <nav class="space-y-2">
                    <a href="festival-info.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">הסבר על הפסטיבל</a>
                    <a href="costs.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">עלויות</a>
                    <a href="suppliers.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">ספקים</a>
                    <a href="map.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">מפת הפסטיבל</a>
                    <a href="tickets.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">כרטיסים</a>
                    <a href="summaries.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">סיכומים</a>
                    <a href="user-management.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">ניהול משתמשים</a>
                </nav>
            </aside>

            <main class="flex-1 p-6 sm:p-8 min-h-screen">
                <div class="max-w-5xl mx-auto">
                    <div class="text-center mb-10">
                        <h1 class="text-4xl sm:text-5xl font-bold text-gold mb-4">פורטל הניהול של SAYORA</h1>
                        <p class="text-lg text-gray-300">המקום המרכזי לכל המידע, התכנון והתיאום של צוות ההפקה.</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center mb-12">
                        <div class="content-card p-6 rounded-lg">
                            <i class="fas fa-users text-4xl text-gold mb-3"></i>
                            <h3 class="text-2xl font-bold">2,500 איש</h3>
                            <p class="text-gray-400">קיבולת נוכחית</p>
                        </div>
                        <div class="content-card p-6 rounded-lg">
                            <i class="fas fa-clock text-4xl text-gold mb-3"></i>
                            <h3 class="text-2xl font-bold">12 שעות</h3>
                            <p class="text-gray-400">של מוזיקה וחוויה</p>
                        </div>
                        <div class="content-card p-6 rounded-lg">
                            <i class="fas fa-map-marker-alt text-4xl text-gold mb-3"></i>
                            <h3 class="text-2xl font-bold">מצדה</h3>
                            <p class="text-gray-400">לוקיישן עוצר נשימה</p>
                        </div>
                    </div>

                    <div class="content-card p-6 sm:p-8 rounded-lg shadow-xl space-y-6">
                        <div>
                            <h2 class="text-3xl font-semibold text-gold mb-3 flex items-center gap-3"><i class="fas fa-heart"></i> חזון הפסטיבל</h2>
                            <p class="text-gray-300 leading-relaxed">
                                SAYORA הוא יותר מפסטיבל, זוהי תנועה. חווית מוזיקה סוחפת של 12 שעות בנוף המדברי וההיסטורי של מצדה, המיועדת בשלב זה לכ-2,500 איש. מהות הפסטיבל סובבת סביב שלושה ערכי יסוד: <strong>אהבה, אחדות וחופש</strong>. אנו שואפים ליצור מרחב בטוח ומכיל בו כל משתתף ומשתתפת ירגישו את החיבור לעצמם, לסביבה ולאנשים סביבם, וייקחו חלק בחוויה בלתי נשכחת.
                            </p>
                        </div>
                        <div>
                            <h2 class="text-3xl font-semibold text-gold mb-3 flex items-center gap-3"><i class="fas fa-rocket"></i> התוכניות לעתיד</h2>
                            <p class="text-gray-300 leading-relaxed">
                                החזון שלנו הוא להתרחב ולהפוך את SAYORA לפסטיבל בינלאומי מוביל של שלושה ימים. התוכנית כוללת הקמה של ארבע במות מוזיקה עם ליינאפים מגוונים, מתחמי לינה ייחודיים החל מאוהלי גלמפינג ועד שיתופי פעולה עם מלונות באזור ים המלח. ימי הפסטיבל יציעו חוויה הוליסטית: מסיבות ומופעים משעות הצהריים עד השעות הקטנות של הלילה, ובבקרים יתקיימו סדנאות, שיעורי יוגה, פעילויות ספורט ומתחמי 'צ'יל' רגועים להטענת מצברים.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <footer class="text-center mt-12 text-sm text-gray-500">
                    <p>&copy; 2025 SAYORA Festival | נבנה על ידי דורון נקש</p>
                </footer>
            </main>
        </div>
    </div>

    <script type="module">
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBK49YH2eqeTLhrvKgIsbg3r53-Wt4PmpQ",
            authDomain: "sayora-all.firebaseapp.com",
            projectId: "sayora-all",
            storageBucket: "sayora-all.appspot.com",
            messagingSenderId: "836076195583",
            appId: "1:836076195583:web:a7b0067b866d7e027a06ca",
            measurementId: "G-LFN43NSE5K"
        };

        // Import Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // DOM Elements
        const loginView = document.getElementById('login-view');
        const mainView = document.getElementById('main-view');
        const loginForm = document.getElementById('login-form');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');
        const logoutBtn = document.getElementById('logout-btn');
        const welcomeMsg = document.getElementById('welcome-msg');
        
        // Sidebar elements
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const closeSidebarBtn = document.getElementById('close-sidebar-btn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        // --- Authentication Logic ---

        onAuthStateChanged(auth, (user) => {
            if (user) {
                loginView.classList.add('hidden');
                mainView.classList.remove('hidden');
                welcomeMsg.textContent = `ברוך הבא, ${user.email.split('@')[0]}`;
            } else {
                mainView.classList.add('hidden');
                loginView.classList.remove('hidden');
                emailInput.value = '';
                passwordInput.value = '';
            }
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = emailInput.value;
            const password = passwordInput.value;
            loginError.textContent = ''; 

            signInWithEmailAndPassword(auth, email, password)
                .catch((error) => {
                    console.error("Login Error:", error.code, error.message);
                    if (error.code === 'auth/invalid-credential' || error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found') {
                        loginError.textContent = 'אימייל או סיסמה שגויים.';
                    } else if (error.code === 'auth/invalid-email') {
                        loginError.textContent = 'פורמט אימייל לא תקין.';
                    } else {
                        loginError.textContent = 'אירעה שגיאה. נסה שוב מאוחר יותר.';
                    }
                });
        });

        logoutBtn.addEventListener('click', () => {
            signOut(auth).catch(error => console.error("Logout Error:", error));
        });

        // --- Sidebar Logic ---
        const openSidebar = () => {
            sidebar.classList.add('open');
            sidebarOverlay.classList.remove('hidden');
        }
        const closeSidebar = () => {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.add('hidden');
        }

        hamburgerBtn.addEventListener('click', openSidebar);
        closeSidebarBtn.addEventListener('click', closeSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

    </script>
</body>
</html>


<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAYORA | ניהול הפקה</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --gold-color: #FFD700;
            --dark-bg: #0a0a0a;
            --light-text: #E0E0E0;
            --dark-card: #1a1a1a;
            --dark-input: #2a2a2a;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Assistant', sans-serif;
            background-color: var(--dark-bg);
            color: var(--light-text);
            overflow-x: hidden;
        }
        .bg-black-gradient {
            background: linear-gradient(180deg, #121212 0%, #000000 100%);
        }
        .text-gold {
            color: var(--gold-color);
        }
        .border-gold {
            border-color: var(--gold-color);
        }
        .btn-gold {
            background-color: var(--gold-color);
            color: #111111;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
        }
        .btn-gold:hover {
            background-color: #e6c200;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        .input-field {
            background-color: var(--dark-input);
            border: 1px solid #444;
            color: var(--light-text);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: var(--gold-color);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        #sidebar {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        #sidebar.open {
            transform: translateX(0);
        }
        .content-card {
            background-color: rgba(26, 26, 26, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5), 0 0 15px rgba(255, 215, 0, 0.1);
        }

        /* Design Upgrade: Animated Hamburger Icon */
        .hamburger-btn {
            width: 30px;
            height: 22px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            position: relative;
            z-index: 100;
        }
        .hamburger-btn span {
            width: 100%;
            height: 3px;
            background-color: var(--gold-color);
            border-radius: 3px;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .hamburger-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(8px, 8px);
        }
        .hamburger-btn.active span:nth-child(2) {
            opacity: 0;
        }
        .hamburger-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Fade-in animation for main content */
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-black">

    <!-- Login View -->
    <div id="login-view" class="flex flex-col items-center justify-center min-h-screen p-4 bg-black-gradient">
        <div class="w-full max-w-sm text-center">
            <img src="https://i.imgur.com/L1bxSUe.jpeg" alt="SAYORA Logo" class="w-40 h-40 object-cover rounded-full mx-auto mb-6 border-2 border-gold shadow-lg shadow-gold/20">
            <h1 class="text-4xl font-bold text-gold mb-2" style="letter-spacing: 2px;">SAYORA</h1>
            <p class="text-lg text-gray-300 mb-8">פורטל ניהול והפקה</p>
            
            <form id="login-form" class="space-y-6">
                <!-- Fix: Added autocomplete attributes to prevent unwanted text pasting -->
                <!-- Design: Added icons inside input fields -->
                <div class="relative">
                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400">
                        <i class="fas fa-envelope"></i>
                    </span>
                    <input type="email" id="email" placeholder="אימייל" class="w-full p-3 pr-10 rounded-lg input-field text-right" required autocomplete="email">
                </div>
                <div class="relative">
                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400">
                        <i class="fas fa-lock"></i>
                    </span>
                    <input type="password" id="password" placeholder="סיסמה" class="w-full p-3 pr-10 rounded-lg input-field text-right" required autocomplete="current-password">
                </div>
                <button type="submit" class="w-full font-bold py-3 px-4 rounded-lg btn-gold text-lg">התחברות</button>
            </form>
            <p id="login-error" class="text-red-400 mt-4 h-5"></p>
        </div>
    </div>

    <!-- Main App View -->
    <div id="main-view" class="hidden bg-black-gradient">
        <!-- Header -->
        <header class="bg-black/80 backdrop-blur-sm sticky top-0 z-40 shadow-lg shadow-gold/10">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                 <!-- Design: Replaced hamburger character with a custom animated icon -->
                <button id="hamburger-btn" class="p-2 lg:hidden hamburger-btn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="flex items-center gap-3">
                    <img src="https://i.imgur.com/L1bxSUe.jpeg" alt="SAYORA Logo" class="w-10 h-10 rounded-full border border-gold">
                    <span class="text-2xl font-bold text-gold">SAYORA</span>
                </div>
                <div id="user-info" class="flex items-center gap-3">
                    <span id="welcome-msg" class="text-sm text-gray-300 hidden md:block"></span>
                    <button id="logout-btn" class="bg-transparent border border-gold text-gold py-1 px-3 rounded-md text-sm hover:bg-gold hover:text-black transition-colors">
                        התנתקות
                    </button>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/60 z-40 hidden lg:hidden"></div>
        <nav id="sidebar" class="fixed top-0 right-0 h-full w-64 bg-black-gradient shadow-2xl z-50 p-6 lg:hidden">
            <button id="close-sidebar-btn" class="absolute top-4 left-4 text-gray-400 text-3xl">&times;</button>
            <div class="mt-12 space-y-4 text-center">
                <a href="#festival-info" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">הסבר על הפסטיבל</a>
                <a href="#costs" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">עלויות</a>
                <a href="#suppliers" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">ספקים</a>
                <a href="#map" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">מפת הפסטיבל</a>
                <a href="#tickets" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">כרטיסים</a>
                <a href="#summaries" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">סיכומים</a>
                <a href="#user-management" class="block py-2 px-4 rounded-md hover:bg-gold/10 text-lg transition-colors">ניהול משתמשים</a>
            </div>
        </nav>
        
        <!-- Main Content -->
        <div class="flex">
            <!-- Desktop Sidebar -->
            <aside class="w-64 bg-black p-6 hidden lg:block h-screen sticky top-16 shadow-lg shadow-black/50 border-l border-gray-800">
                <h2 class="text-xl font-semibold text-gold mb-6 border-b border-gold/20 pb-2">תפריט ניווט</h2>
                <nav class="space-y-2">
                    <a href="#festival-info" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">הסבר על הפסטיבל</a>
                    <a href="#costs" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">עלויות</a>
                    <a href="#suppliers" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">ספקים</a>
                    <a href="#map" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">מפת הפסטיבל</a>
                    <a href="#tickets" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">כרטיסים</a>
                    <a href="#summaries" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">סיכומים</a>
                    <a href="#user-management" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gold/20 text-gray-200">ניהול משתמשים</a>
                </nav>
            </aside>

            <main class="flex-1 p-6 sm:p-8 min-h-screen">
                <div class="max-w-5xl mx-auto fade-in-up">
                    <div class="text-center mb-10">
                        <h1 class="text-4xl sm:text-5xl font-bold text-gold mb-4">פורטל הניהול של SAYORA</h1>
                        <p class="text-lg text-gray-300">המקום המרכזי לכל המידע, התכנון והתיאום של צוות ההפקה.</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center mb-12">
                        <div class="content-card p-6 rounded-lg">
                            <i class="fas fa-users text-4xl text-gold mb-3"></i>
                            <h3 class="text-2xl font-bold">2,500 איש</h3>
                            <p class="text-gray-400">קיבולת נוכחית</p>
                        </div>
                        <div class="content-card p-6 rounded-lg">
                            <i class="fas fa-clock text-4xl text-gold mb-3"></i>
                            <h3 class="text-2xl font-bold">12 שעות</h3>
                            <p class="text-gray-400">של מוזיקה וחוויה</p>
                        </div>
                        <div class="content-card p-6 rounded-lg">
                            <i class="fas fa-map-marker-alt text-4xl text-gold mb-3"></i>
                            <h3 class="text-2xl font-bold">מצדה</h3>
                            <p class="text-gray-400">לוקיישן עוצר נשימה</p>
                        </div>
                    </div>

                    <div id="festival-info" class="content-card p-6 sm:p-8 rounded-lg shadow-xl space-y-6">
                        <div>
                            <h2 class="text-3xl font-semibold text-gold mb-3 flex items-center gap-3"><i class="fas fa-heart"></i> חזון הפסטיבל</h2>
                            <p class="text-gray-300 leading-relaxed">
                                SAYORA הוא יותר מפסטיבל, זוהי תנועה. חווית מוזיקה סוחפת של 12 שעות בנוף המדברי וההיסטורי של מצדה, המיועדת בשלב זה לכ-2,500 איש. מהות הפסטיבל סובבת סביב שלושה ערכי יסוד: <strong>אהבה, אחדות וחופש</strong>. אנו שואפים ליצור מרחב בטוח ומכיל בו כל משתתף ומשתתפת ירגישו את החיבור לעצמם, לסביבה ולאנשים סביבם, וייקחו חלק בחוויה בלתי נשכחת.
                            </p>
                        </div>
                        <div>
                            <h2 class="text-3xl font-semibold text-gold mb-3 flex items-center gap-3"><i class="fas fa-rocket"></i> התוכניות לעתיד</h2>
                            <p class="text-gray-300 leading-relaxed">
                                החזון שלנו הוא להתרחב ולהפוך את SAYORA לפסטיבל בינלאומי מוביל של שלושה ימים. התוכנית כוללת הקמה של ארבע במות מוזיקה עם ליינאפים מגוונים, מתחמי לינה ייחודיים החל מאוהלי גלמפינג ועד שיתופי פעולה עם מלונות באזור ים המלח. ימי הפסטיבל יציעו חוויה הוליסטית: מסיבות ומופעים משעות הצהריים עד השעות הקטנות של הלילה, ובבקרים יתקיימו סדנאות, שיעורי יוגה, פעילויות ספורט ומתחמי 'צ'יל' רגועים להטענת מצברים.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <footer class="text-center mt-12 py-6 text-sm text-gray-500 border-t border-gray-800">
                    <p>&copy; 2025 SAYORA Festival | נבנה על ידי דורון נקש</p>
                </footer>
            </main>
        </div>
    </div>

    <script type="module">
        // --- Firebase Configuration ---
        const firebaseConfig = {
            apiKey: "AIzaSyBK49YH2eqeTLhrvKgIsbg3r53-Wt4PmpQ",
            authDomain: "sayora-all.firebaseapp.com",
            projectId: "sayora-all",
            storageBucket: "sayora-all.appspot.com",
            messagingSenderId: "836076195583",
            appId: "1:836076195583:web:a7b0067b866d7e027a06ca",
            measurementId: "G-LFN43NSE5K"
        };

        // --- Firebase Imports (Updated to a more recent version) ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // --- Firebase Initialization ---
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // --- DOM Element Selection ---
        const loginView = document.getElementById('login-view');
        const mainView = document.getElementById('main-view');
        const loginForm = document.getElementById('login-form');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');
        const logoutBtn = document.getElementById('logout-btn');
        const welcomeMsg = document.getElementById('welcome-msg');
        
        // Sidebar elements
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const closeSidebarBtn = document.getElementById('close-sidebar-btn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        // --- Authentication Logic ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in
                loginView.classList.add('hidden');
                mainView.classList.remove('hidden');
                const username = user.email.split('@')[0];
                welcomeMsg.textContent = `ברוך הבא, ${username}`;
            } else {
                // User is signed out
                mainView.classList.add('hidden');
                loginView.classList.remove('hidden');
                emailInput.value = '';
                passwordInput.value = '';
                loginError.textContent = ''; // Clear any previous errors
            }
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = emailInput.value;
            const password = passwordInput.value;
            loginError.textContent = ''; 

            signInWithEmailAndPassword(auth, email, password)
                .catch((error) => {
                    console.error("Login Error:", error.code, error.message);
                    // Provide user-friendly error messages
                    switch (error.code) {
                        case 'auth/invalid-credential':
                        case 'auth/wrong-password':
                        case 'auth/user-not-found':
                            loginError.textContent = 'אימייל או סיסמה שגויים.';
                            break;
                        case 'auth/invalid-email':
                            loginError.textContent = 'פורמט אימייל לא תקין.';
                            break;
                        default:
                            loginError.textContent = 'אירעה שגיאה. נסה שוב מאוחר יותר.';
                    }
                });
        });

        logoutBtn.addEventListener('click', () => {
            signOut(auth).catch(error => console.error("Logout Error:", error));
        });

        // --- Sidebar Logic ---
        const openSidebar = () => {
            sidebar.classList.add('open');
            sidebarOverlay.classList.remove('hidden');
            hamburgerBtn.classList.add('active'); // Animate hamburger to 'X'
        };
        const closeSidebar = () => {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.add('hidden');
            hamburgerBtn.classList.remove('active'); // Animate 'X' back to hamburger
        };

        hamburgerBtn.addEventListener('click', () => {
            if (sidebar.classList.contains('open')) {
                closeSidebar();
            } else {
                openSidebar();
            }
        });
        
        closeSidebarBtn.addEventListener('click', closeSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);
        
        // Close sidebar when a navigation link is clicked
        document.querySelectorAll('#sidebar a').forEach(link => {
            link.addEventListener('click', closeSidebar);
        });

    </script>
</body>
</html>

